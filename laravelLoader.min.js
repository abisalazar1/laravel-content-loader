/*
 By Abi Salazar https://abisalazar.co.uk/ && https://development.abisalazar.co.uk/
 Available for use under the MIT License
*/

!function(t){t.fn.contentLoader=function(s){this.settings=t.extend({url:"/load",data:{},csrfToken:t('meta[name="csrf-token"]').attr("content")||Laravel.csrfToken,auto:!0,ajaxType:"GET",contentDataType:null,lastPage:null,results:"#"+t(this).attr("id")+"_results",response:function(t){alert("You must add a response function.")},error:function(t){console.log(t)}},s),this.page=this.settings.auto?0:1,this.on("click",function(){this.page++,this.request()}.bind(this)),this.request=function(){t.ajax({url:this.settings.url+"?page="+this.page+"&"+this.settings.contentDataType,data:this.settings.data,dataType:"JSON",type:this.settings.ajaxType,headers:{"X-CSRF-TOKEN":this.settings.csrfToken},success:function(t){this.settings.response(t),this.loadBtn(t)}.bind(this),error:function(t){this.settings.error(t)}.bind(this)})},this.loadBtn=function(s){this.settings.lastPage=s.last_page,this.page>=this.settings.lastPage&&t(this).hide()},this.settings.auto&&(this.page++,this.request())}}(jQuery);
